<?xml version="1.0" encoding="utf-8"?>
<gpu:xmodel xmlns:gpu="http://www.dcs.shef.ac.uk/~paul/XMMLGPU" xmlns="http://www.dcs.shef.ac.uk/~paul/XMML">
  <name>Optional </name>
<!-- Variables de entorno -->
  <gpu:environment>
    <gpu:constants>
<!-- Variables del ejemplo -->
      <gpu:variable>
        <type>float</type>
        <name>EMMISION_RATE_EXIT1</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>EMMISION_RATE_EXIT2</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>EMMISION_RATE_EXIT3</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>EMMISION_RATE_EXIT4</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>EMMISION_RATE_EXIT5</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>EMMISION_RATE_EXIT6</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>EMMISION_RATE_EXIT7</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT1_PROBABILITY</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT2_PROBABILITY</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT3_PROBABILITY</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT4_PROBABILITY</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT5_PROBABILITY</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT6_PROBABILITY</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT7_PROBABILITY</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT1_STATE</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT2_STATE</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT3_STATE</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT4_STATE</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT5_STATE</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT6_STATE</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT7_STATE</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT1_CELL_COUNT</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT2_CELL_COUNT</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT3_CELL_COUNT</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT4_CELL_COUNT</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT5_CELL_COUNT</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT6_CELL_COUNT</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT7_CELL_COUNT</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>TIME_SCALER</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>STEER_WEIGHT</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>AVOID_WEIGHT</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>COLLISION_WEIGHT</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>GOAL_WEIGHT</name>
      </gpu:variable>
<!-- PosiciÃ³n de la salida -->
      <gpu:variable>
        <type>int</type>
        <name>EXIT_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>EXIT_Y</name>
      </gpu:variable>
<!-- Probabilidades usadas para manejar la cantidad de enfermos -->	
      <gpu:variable>
        <type>float</type>
        <name>PROB_SNIFF</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_INFECT</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_SPAWN_SICK</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_INFECT_PERSONAL</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_INFECT_CHAIR</name>
      </gpu:variable>
<!-- Manejo de las sillas -->
      <gpu:variable>
        <type>int</type>
        <name>FIRSTCHAIR_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>FIRSTCHAIR_Y</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>SPACE_BETWEEN</name>
      </gpu:variable>
<!-- Manejo de los doctores -->
      <gpu:variable>
        <type>int</type>
        <name>FIRSTDOCTOR_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>FIRSTDOCTOR_Y</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>SPACE_BETWEEN_DOCTORS</name>
      </gpu:variable>
<!-- Manejo del triage -->
      <gpu:variable>
        <type>int</type>
        <name>TRIAGE_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>TRIAGE_Y</name>
      </gpu:variable>
<!-- Manejo de la UCI -->
      <gpu:variable>
        <type>int</type>
        <name>UCI_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>UCI_Y</name>
      </gpu:variable>
<!-- Checkpoints -->
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_1_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_1_Y</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_2_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_2_Y</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_3_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_3_Y</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_4_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_4_Y</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_5_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>CHECKPOINT_5_Y</name>
      </gpu:variable>
<!-- Manejo de los especialistas -->
      <gpu:variable>
        <type>int</type>
        <name>FIRSTSPECIALIST_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>FIRSTSPECIALIST_Y</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>SPACE_BETWEEN_SPECIALISTS</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>FIFTHSPECIALIST_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>FIFTHSPECIALIST_Y</name>
      </gpu:variable>
<!-- Probabilidades de prioridad del triage -->
      <gpu:variable>
        <type>float</type>
        <name>PROB_LEVEL_1</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_LEVEL_2</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_LEVEL_3</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_LEVEL_4</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_LEVEL_5</name>
      </gpu:variable>
<!-- Probabilidades de especialidad -->
      <gpu:variable>
        <type>float</type>
        <name>PROB_SURGICAL</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_MEDICAL</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_PEDIATRICS</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_UCI</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_GYNECOLOGIST</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_GERIATRICS</name>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>PROB_PSYCHIATRY</name>
      </gpu:variable>
<!-- Manejo del recepcionista -->
      <gpu:variable>
        <type>int</type>
        <name>RECEPTION_MINUTES</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>RECEPTIONIST_X</name>
      </gpu:variable>
      <gpu:variable>
        <type>int</type>
        <name>RECEPTIONIST_Y</name>
      </gpu:variable>
    </gpu:constants>
    <gpu:functionFiles>
      <file>functions.c</file>
    </gpu:functionFiles>
    <gpu:initFunctions>
      <gpu:initFunction>
        <gpu:name>inicializarMapa</gpu:name>
      </gpu:initFunction>
    </gpu:initFunctions>
  </gpu:environment>
  <xagents>
<!-- Agente paciente -->
    <gpu:xagent>
      <name>agent</name>
  <!-- Variables -->
      <memory>
        <gpu:variable>
          <type>int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>velx</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>vely</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>steer_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>steer_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>height</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>exit_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>speed</name>
        </gpu:variable>
  <!-- rendering and animation variables-->
        <gpu:variable>
          <type>int</type>
          <name>lod</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>animate</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>animate_dir</name>
        </gpu:variable>
  <!-- Variables agregadas -->
        <gpu:variable>
          <type>int</type>
          <name>estado</name>
          <description>0=sano,1=portador,2=enfermo</description>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>tick</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>estado_movimiento</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>go_to_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>go_to_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>checkpoint</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>chair_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>box_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>doctor_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>specialist_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>priority</name>
        </gpu:variable>
      </memory>
  <!-- Funciones -->
      <functions>
        <gpu:function>
          <name>output_pedestrian_location</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>pedestrian_location</messageName>
              <gpu:type>single_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        <gpu:function>
          <name>avoid_pedestrians</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>pedestrian_location</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>
        
    
        <gpu:function>
          <name>output_pedestrian_state</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>pedestrian_state</messageName>
              <gpu:type>single_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        <gpu:function>
          <name>infect_pedestrians</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>pedestrian_state</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>move</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>check_in</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>true</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        
  <!-- Funciones de las sillas-->

        <gpu:function>
          <name>receive_chair_state</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>chair_state</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>output_chair_contact</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>chair_contact</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <agentVariable>estado_movimiento</agentVariable>
            </lhs>
            <operator>==</operator>
            <rhs>
                <value>4</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>output_free_chair</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>free_chair</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <agentVariable>estado_movimiento</agentVariable>
            </lhs>
            <operator>==</operator>
            <rhs>
                <value>39</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>output_chair_petition</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>chair_petition</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <condition>
                <lhs>
                  <condition>
                    <lhs>
                      <agentVariable>estado_movimiento</agentVariable>
                    </lhs>
                    <operator>==</operator>
                    <rhs>
                        <value>1</value>
                    </rhs>
                  </condition>
                </lhs>
                <operator>||</operator>
                <rhs>
                  <condition>
                    <lhs>
                      <agentVariable>estado_movimiento</agentVariable>
                    </lhs>
                    <operator>==</operator>
                    <rhs>
                        <value>11</value>
                    </rhs>
                  </condition>
                </rhs>
              </condition>
            </lhs>
            <operator>||</operator>
            <rhs>
              <condition>
                <lhs>
                  <condition>
                    <lhs>
                      <agentVariable>estado_movimiento</agentVariable>
                    </lhs>
                    <operator>==</operator>
                    <rhs>
                        <value>24</value>
                    </rhs>
                  </condition>
                </lhs>
                <operator>||</operator>
                <rhs>
                  <condition>
                    <lhs>
                      <agentVariable>estado_movimiento</agentVariable>
                    </lhs>
                    <operator>==</operator>
                    <rhs>
                        <value>29</value>
                    </rhs>
                  </condition>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>receive_chair_response</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>chair_response</messageName>
            </gpu:input>
          </inputs>
          <condition>
            <lhs>
              <condition>
                <lhs>
                  <condition>
                    <lhs>
                      <agentVariable>estado_movimiento</agentVariable>
                    </lhs>
                    <operator>==</operator>
                    <rhs>
                        <value>2</value>
                    </rhs>
                  </condition>
                </lhs>
                <operator>||</operator>
                <rhs>
                  <condition>
                    <lhs>
                      <agentVariable>estado_movimiento</agentVariable>
                    </lhs>
                    <operator>==</operator>
                    <rhs>
                        <value>12</value>
                    </rhs>
                  </condition>
                </rhs>
              </condition>
            </lhs>
            <operator>||</operator>
            <rhs>
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>25</value>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>true</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        
  <!-- Funciones del recepcionista -->
        <gpu:function>
          <name>receive_check_in_response</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>check_in_response</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>chair_petition</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>4</value>
                </rhs>
              </condition>
            </lhs>
            <operator>||</operator>
            <rhs>
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>8</value>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
  <!-- Funciones del box -->
        <gpu:function>
          <name>output_box_petition</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>box_petition</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <agentVariable>estado_movimiento</agentVariable>
            </lhs>
            <operator>==</operator>
            <rhs>
                <value>19</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        
        <gpu:function>
          <name>receive_box_response</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>box_response</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
  <!-- Funciones del doctor_manager -->
        <gpu:function>
          <name>output_doctor_petition</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>doctor_petition</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs> 
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>27</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <agentVariable>specialist_no</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>0</value>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        
        <gpu:function>
          <name>receive_doctor_response</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>doctor_response</messageName>
            </gpu:input>
          </inputs>
          <condition>
            <lhs>
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>28</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <agentVariable>specialist_no</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>0</value>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>receive_attention_terminated</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>attention_terminated</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>free_doctor</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>32</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <agentVariable>specialist_no</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>0</value>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>receive_specialist_terminated</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>specialist_terminated</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>free_specialist</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs> 
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>32</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&gt;</operator>
                    <rhs>
                        <value>0</value>
                    </rhs>
                  </condition>
                </lhs>
                <operator>and</operator>
                <rhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&lt;</operator>
                    <rhs>
                        <value>6</value>
                    </rhs>
                  </condition>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>output_doctor_reached</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>doctor_reached</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs> 
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>31</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <agentVariable>specialist_no</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>0</value>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
  <!-- Funciones del especialista -->
        <gpu:function>
          <name>receive_specialist_response</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>specialist_response</messageName>
            </gpu:input>
          </inputs>
          <condition>
            <lhs> 
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>28</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&gt;</operator>
                    <rhs>
                        <value>0</value>
                    </rhs>
                  </condition>
                </lhs>
                <operator>and</operator>
                <rhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&lt;</operator>
                    <rhs>
                        <value>6</value>
                    </rhs>
                  </condition>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>output_specialist_petition</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>specialist_petition</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs> 
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>27</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&gt;</operator>
                    <rhs>
                        <value>0</value>
                    </rhs>
                  </condition>
                </lhs>
                <operator>and</operator>
                <rhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&lt;</operator>
                    <rhs>
                        <value>6</value>
                    </rhs>
                  </condition>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>output_specialist_reached</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>specialist_reached</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs> 
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>31</value>
                </rhs>
              </condition>
            </lhs>
            <operator>and</operator>
            <rhs>
              <condition>
                <lhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&gt;</operator>
                    <rhs>
                        <value>0</value>
                    </rhs>
                  </condition>
                </lhs>
                <operator>and</operator>
                <rhs>
                  <condition>
                    <lhs>
                      <agentVariable>specialist_no</agentVariable>
                    </lhs>
                    <operator>&lt;</operator>
                    <rhs>
                        <value>6</value>
                    </rhs>
                  </condition>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
  <!-- Funciones del triage -->
        <gpu:function>
          <name>output_triage_petition</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <outputs>
            <gpu:output>
              <messageName>triage_petition</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>14</value>
                </rhs>
              </condition>
            </lhs>
            <operator>||</operator>
            <rhs>
              <condition>
                <lhs>
                  <agentVariable>estado_movimiento</agentVariable>
                </lhs>
                <operator>==</operator>
                <rhs>
                    <value>21</value>
                </rhs>
              </condition>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        
        <gpu:function>
          <name>receive_triage_response</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <inputs>
            <gpu:input>
              <messageName>triage_response</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>chair_petition</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <agentVariable>estado_movimiento</agentVariable>
            </lhs>
            <operator>==</operator>
            <rhs>
                <value>15</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>default</name>
        </gpu:state>
        <initialState>default</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:xagent>
    
<!-- Agente navmap -->

    <gpu:xagent>
      <name>navmap</name>
      <memory>
        <gpu:variable>
          <type>int</type>
          <name>x</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>y</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>exit_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>height</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>collision_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>collision_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit0_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit0_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit1_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit1_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit2_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit2_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit3_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit3_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit4_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit4_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit5_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit5_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit6_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>exit6_y</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>cant_generados</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>output_navmap_cells</name>
          <currentState>static</currentState>
          <nextState>static</nextState>
          <outputs>
            <gpu:output>
              <messageName>navmap_cell</messageName>
              <gpu:type>single_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        <gpu:function>
          <name>generate_pedestrians</name>
          <currentState>static</currentState>
          <nextState>static</nextState>
          <xagentOutputs>
            <gpu:xagentOutput>
              <xagentName>agent</xagentName>
              <state>default</state>
            </gpu:xagentOutput>
          </xagentOutputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>static</name>
        </gpu:state>
        <initialState>static</initialState>
      </states>
      <gpu:type>discrete</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:xagent>
    
<!-- Agente chair -->  
    <gpu:xagent>
      <name>chair</name>
      <memory>
        <gpu:variable>
          <type>int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>x</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>y</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>state</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>output_chair_state</name>
          <currentState>defaultChair</currentState>
          <nextState>defaultChair</nextState>
          <inputs>
            <gpu:input>
              <messageName>chair_contact</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>chair_state</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultChair</name>
        </gpu:state>
        <initialState>defaultChair</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:xagent>
<!-- Agente doctor_manager -->   
    <gpu:xagent>
      <name>doctor_manager</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tick</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>rear</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>size</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>doctors_occupied</name>
          <description>Arreglo que maneja si cada doctor estÃ¡ disponible o no</description>
          <arrayLength>4</arrayLength>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>free_doctors</name>
          <defaultValue>4</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>ivec2</type>
          <name>patientQueue</name>
          <arrayLength>35</arrayLength>
          <defaultValue>-1,-1</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>receive_doctor_petitions</name>
          <currentState>defaultDoctorManager</currentState>
          <nextState>defaultDoctorManager</nextState>
          <inputs>
            <gpu:input>
              <messageName>doctor_petition</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>doctor_response</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>receive_free_doctors</name>
          <currentState>defaultDoctorManager</currentState>
          <nextState>defaultDoctorManager</nextState>
          <inputs>
            <gpu:input>
              <messageName>free_doctor</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultDoctorManager</name>
        </gpu:state>
        <initialState>defaultDoctorManager</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:xagent>

<!-- Agente specialist manager -->   
    <gpu:xagent>
      <name>specialist_manager</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tick</name>
          <arrayLength>5</arrayLength>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>free_specialist</name>
          <arrayLength>5</arrayLength>
          <defaultValue>1</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>rear</name>
          <arrayLength>5</arrayLength>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>size</name>
          <arrayLength>5</arrayLength>
        </gpu:variable>
        
        <gpu:variable>
          <type>ivec2</type>
          <name>surgicalQueue</name>
          <arrayLength>35</arrayLength>
          <defaultValue>-1,-1</defaultValue>
        </gpu:variable>

        <gpu:variable>
          <type>ivec2</type>
          <name>pediatricsQueue</name>
          <arrayLength>35</arrayLength>
          <defaultValue>-1,-1</defaultValue>
        </gpu:variable>

        <gpu:variable>
          <type>ivec2</type>
          <name>gynecologistQueue</name>
          <arrayLength>35</arrayLength>
          <defaultValue>-1,-1</defaultValue>
        </gpu:variable>

        <gpu:variable>
          <type>ivec2</type>
          <name>geriatricsQueue</name>
          <arrayLength>35</arrayLength>
          <defaultValue>-1,-1</defaultValue>
        </gpu:variable>

        <gpu:variable>
          <type>ivec2</type>
          <name>psychiatristQueue</name>
          <arrayLength>35</arrayLength>
          <defaultValue>-1,-1</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>receive_specialist_petitions</name>
          <currentState>defaultSpecialistManager</currentState>
          <nextState>defaultSpecialistManager</nextState>
          <inputs>
            <gpu:input>
              <messageName>specialist_petition</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>specialist_response</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>receive_free_specialist</name>
          <currentState>defaultSpecialistManager</currentState>
          <nextState>defaultSpecialistManager</nextState>
          <inputs>
            <gpu:input>
              <messageName>free_specialist</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultSpecialistManager</name>
        </gpu:state>
        <initialState>defaultSpecialistManager</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:xagent>
<!-- Agente specialist -->
    <gpu:xagent>
      <name>specialist</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>current_patient</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tick</name>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>receive_specialist_reached</name>
          <currentState>defaultSpecialist</currentState>
          <nextState>defaultSpecialist</nextState>
          <inputs>
            <gpu:input>
              <messageName>specialist_reached</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>specialist_terminated</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultSpecialist</name>
        </gpu:state>
        <initialState>defaultSpecialist</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:xagent>
<!-- Agente receptionist -->
    <gpu:xagent>
      <name>receptionist</name>
      <memory>
        <gpu:variable>
          <type>int</type>
          <name>x</name>
          <defaultValue>0.093750</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>y</name>
          <defaultValue>-0.375000</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>patientQueue</name>
          <arrayLength>100</arrayLength>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>front</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>rear</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>size</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tick</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>current_patient</name>
          <defaultValue>-1</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>attend_patient</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>estado</name>
          <description>0=sano,1=portador,2=enfermo</description>
          <defaultValue>0</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>receptionServer</name>
          <currentState>defaultReceptionist</currentState>
          <nextState>defaultReceptionist</nextState>
          <inputs>
            <gpu:input>
              <messageName>check_in</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>check_in_response</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        
        <gpu:function>
          <name>infect_receptionist</name>
          <currentState>defaultReceptionist</currentState>
          <nextState>defaultReceptionist</nextState>
          <inputs>
            <gpu:input>
              <messageName>pedestrian_state</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultReceptionist</name>
        </gpu:state>
        <initialState>defaultReceptionist</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize><!-- Se ponen potencias de 2, no hay perdida de performance por poner un numero grande -->
    </gpu:xagent>
    
<!-- Agente agent_generator -->

    <gpu:xagent>
      <name>agent_generator</name>
      <memory>
        <gpu:variable>
          <type>int</type>
          <name>chairs_generated</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>boxes_generated</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>doctors_generated</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>specialists_generated</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>personal_generated</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>generate_chairs</name>
          <currentState>defaultGenerator</currentState>
          <nextState>defaultGenerator</nextState>
          <xagentOutputs>
            <gpu:xagentOutput>
              <xagentName>chair</xagentName>
              <state>defaultChair</state>
            </gpu:xagentOutput>
          </xagentOutputs>
          <condition>
            <lhs>
              <agentVariable>chairs_generated</agentVariable>
            </lhs>
            <operator>&lt;</operator>
            <rhs>
                <value>35</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
        
        <gpu:function>
          <name>generate_boxes</name>
          <currentState>defaultGenerator</currentState>
          <nextState>defaultGenerator</nextState>
          <xagentOutputs>
            <gpu:xagentOutput>
              <xagentName>box</xagentName>
              <state>defaultBox</state>
            </gpu:xagentOutput>
          </xagentOutputs>
          <condition>
            <lhs>
              <agentVariable>boxes_generated</agentVariable>
            </lhs>
            <operator>&lt;</operator>
            <rhs>
                <value>3</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>generate_doctors</name>
          <currentState>defaultGenerator</currentState>
          <nextState>defaultGenerator</nextState>
          <xagentOutputs>
            <gpu:xagentOutput>
              <xagentName>doctor</xagentName>
              <state>defaultDoctor</state>
            </gpu:xagentOutput>
          </xagentOutputs>
          <condition>
            <lhs>
              <agentVariable>doctors_generated</agentVariable>
            </lhs>
            <operator>&lt;</operator>
            <rhs>
                <value>4</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>generate_specialists</name>
          <currentState>defaultGenerator</currentState>
          <nextState>defaultGenerator</nextState>
          <xagentOutputs>
            <gpu:xagentOutput>
              <xagentName>specialist</xagentName>
              <state>defaultSpecialist</state>
            </gpu:xagentOutput>
          </xagentOutputs>
          <condition>
            <lhs>
              <agentVariable>specialists_generated</agentVariable>
            </lhs>
            <operator>&lt;</operator>
            <rhs>
                <value>5</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>generate_personal</name>
          <currentState>defaultGenerator</currentState>
          <nextState>defaultGenerator</nextState>
          <xagentOutputs>
            <gpu:xagentOutput>
              <xagentName>agent</xagentName>
              <state>default</state>
            </gpu:xagentOutput>
          </xagentOutputs>
          <condition>
            <lhs>
              <agentVariable>personal_generated</agentVariable>
            </lhs>
            <operator>&lt;</operator>
            <rhs>
                <value>11</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultGenerator</name>
        </gpu:state>
        <initialState>defaultGenerator</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:xagent>
    
<!-- Agente chair_admin -->
    <gpu:xagent>
      <name>chair_admin</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name><!-- Agregada porque sino falla la compilaciÃ³n -->
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>chairArray</name>
          <description>Arreglo que guarda si cada silla estÃ¡ disponible o no</description>
          <arrayLength>35</arrayLength>
          <defaultValue>0</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>attend_chair_petitions</name>
          <currentState>defaultAdmin</currentState>
          <nextState>defaultAdmin</nextState>
          <inputs>
            <gpu:input>
              <messageName>chair_petition</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>chair_response</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>receive_free_chair</name>
          <currentState>defaultAdmin</currentState>
          <nextState>defaultAdmin</nextState>
          <inputs>
            <gpu:input>
              <messageName>free_chair</messageName>
            </gpu:input>
          </inputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultAdmin</name>
        </gpu:state>
        <initialState>defaultAdmin</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>16</gpu:bufferSize><!-- Se ponen potencias de 2, no hay perdida de performance por poner un numero grande -->
    </gpu:xagent>
<!-- Agente box -->
  <gpu:xagent>
      <name>box</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>attending</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tick</name>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>box_server</name>
          <currentState>defaultBox</currentState>
          <nextState>defaultBox</nextState>
          <inputs>
            <gpu:input>
              <messageName>box_petition</messageName>
            </gpu:input>
          </inputs>
          <condition>
            <lhs>
              <agentVariable>attending</agentVariable>
            </lhs>
            <operator>==</operator>
            <rhs>
                <value>0</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>

        <gpu:function>
          <name>attend_box_patient</name>
          <currentState>defaultBox</currentState>
          <nextState>defaultBox</nextState>
          <outputs>
            <gpu:output>
              <messageName>box_response</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <condition>
            <lhs>
              <agentVariable>attending</agentVariable>
            </lhs>
            <operator>></operator>
            <rhs>
                <value>0</value>
            </rhs>
          </condition>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultBox</name>
        </gpu:state>
        <initialState>defaultBox</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize><!-- Se ponen potencias de 2, no hay perdida de performance por poner un numero grande -->
    </gpu:xagent>
<!-- Agente doctor -->
    <gpu:xagent>
      <name>doctor</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>current_patient</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tick</name>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>doctor_server</name>
          <currentState>defaultDoctor</currentState>
          <nextState>defaultDoctor</nextState>
          <inputs>
            <gpu:input>
              <messageName>doctor_reached</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>attention_terminated</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultDoctor</name>
        </gpu:state>
        <initialState>defaultDoctor</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize><!-- Se ponen potencias de 2, no hay perdida de performance por poner un numero grande -->
    </gpu:xagent>
<!-- Agente triage -->
    <gpu:xagent>
      <name>triage</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>front</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>rear</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>size</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>tick</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>boxArray</name>
          <description>Arreglo que maneja si cada box estÃ¡ disponible o no</description>
          <arrayLength>3</arrayLength>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>patientQueue</name>
          <arrayLength>100</arrayLength>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>receive_triage_petitions</name>
          <currentState>defaultTriage</currentState>
          <nextState>defaultTriage</nextState>
          <inputs>
            <gpu:input>
              <messageName>triage_petition</messageName>
            </gpu:input>
          </inputs>
          <outputs>
            <gpu:output>
              <messageName>triage_response</messageName>
              <gpu:type>optional_message</gpu:type>
            </gpu:output>
          </outputs>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>defaultTriage</name>
        </gpu:state>
        <initialState>defaultTriage</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>65536</gpu:bufferSize><!-- Se ponen potencias de 2, no hay perdida de performance por poner un numero grande -->
    </gpu:xagent>
  </xagents>
<!-- Mensajes -->
  <messages>
  <!-- Mensajes de los pacientes -->
    <gpu:message>
      <name>pedestrian_location</name>
      <variables>
        <gpu:variable>
          <type>float</type>
          <name>x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>z</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>estado</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningSpatial>
        <gpu:radius>0.025</gpu:radius>
        <gpu:xmin>-1.0</gpu:xmin>
        <gpu:xmax>1.0</gpu:xmax>
        <gpu:ymin>-1.0</gpu:ymin>
        <gpu:ymax>1.0</gpu:ymax>
        <gpu:zmin>0.0</gpu:zmin>
        <gpu:zmax>0.025</gpu:zmax>
      </gpu:partitioningSpatial>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>pedestrian_state</name>
      <variables>
        <gpu:variable>
          <type>float</type>
          <name>x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>y</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>z</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>estado</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningSpatial>
        <gpu:radius>0.015625</gpu:radius>
        <gpu:xmin>-1.0</gpu:xmin>
        <gpu:xmax>1.0</gpu:xmax>
        <gpu:ymin>-1.0</gpu:ymin>
        <gpu:ymax>1.0</gpu:ymax>
        <gpu:zmin>0.0</gpu:zmin>
        <gpu:zmax>0.015625</gpu:zmax>
      </gpu:partitioningSpatial>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>
  <!-- Mensajes del navmap -->
    <gpu:message>
      <name>navmap_cell</name>
      <variables>
        <gpu:variable>
          <type>int</type>
          <name>x</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>y</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>exit_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>height</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>collision_x</name>
        </gpu:variable>
        <gpu:variable>
          <type>float</type>
          <name>collision_y</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningDiscrete>
        <gpu:radius>0</gpu:radius>
      </gpu:partitioningDiscrete>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

  <!-- Mensajes del recepcionista -->

    <gpu:message> 
      <name>check_in</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>check_in_response</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

  <!-- Mensajes del administrador de sillas -->

    <gpu:message> 
      <name>chair_petition</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>chair_response</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>chair_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

  <!-- Mensajes de las sillas -->
    <gpu:message> 
      <name>chair_state</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>state</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>free_chair</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>chair_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>chair_contact</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>chair_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>state</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>
  <!-- Mensajes del box -->
    <gpu:message> 
      <name>box_petition</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>box_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>box_response</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>doctor_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>priority</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>
  <!-- Mensajes del especialista -->
    <gpu:message> 
      <name>specialist_reached</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>specialist_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>specialist_terminated</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>free_specialist</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>specialist_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>specialist_petition</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>priority</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>specialist_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>
  <!-- Mensajes del doctor -->
    <gpu:message> 
      <name>doctor_reached</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>doctor_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>free_doctor</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>doctor_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>attention_terminated</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>
    
    <gpu:message> 
      <name>doctor_petition</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>doctor_no</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>priority</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>doctor_response</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>doctor_no</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>

    <gpu:message> 
      <name>specialist_response</name>
      <variables>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>specialist_ready</name>
        </gpu:variable>
      </variables>
      <gpu:partitioningNone/>
      <gpu:bufferSize>65536</gpu:bufferSize>
    </gpu:message>
  <!-- Mensajes del triage -->
    <gpu:message> 
        <name>triage_petition</name>
        <variables>
          <gpu:variable>
            <type>unsigned int</type>
            <name>id</name>
          </gpu:variable>
        </variables>
        <gpu:partitioningNone/>
        <gpu:bufferSize>65536</gpu:bufferSize>
      </gpu:message>

      <gpu:message> 
        <name>triage_response</name>
        <variables>
          <gpu:variable>
            <type>unsigned int</type>
            <name>id</name>
          </gpu:variable>
          <gpu:variable>
            <type>int</type>
            <name>box_no</name>
          </gpu:variable>
        </variables>
        <gpu:partitioningNone/>
        <gpu:bufferSize>65536</gpu:bufferSize>
      </gpu:message>
    </messages>
<!-- Layers -->
  <layers>
    <layer>
      <gpu:layerFunction>
        <name>generate_pedestrians</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>generate_chairs</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>generate_boxes</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>generate_doctors</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>generate_specialists</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>generate_personal</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>output_pedestrian_location</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_navmap_cells</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_pedestrian_state</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_chair_contact</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_chair_petition</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_triage_petition</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_doctor_petition</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_doctor_reached</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_box_petition</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>output_specialist_reached</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_free_chair</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_specialist_petition</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>avoid_pedestrians</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>output_chair_state</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_triage_petitions</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>doctor_server</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>receive_specialist_reached</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>infect_pedestrians</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>infect_receptionist</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_chair_state</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_triage_response</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_doctor_petitions</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_free_chair</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>receive_specialist_petitions</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_attention_terminated</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_specialist_terminated</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>move</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_doctor_response</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_specialist_response</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_free_doctors</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>receptionServer</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>box_server</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>attend_box_patient</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_check_in_response</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>attend_chair_petitions</name>
      </gpu:layerFunction>
    </layer>
    <layer>
      <gpu:layerFunction>
        <name>receive_chair_response</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_box_response</name>
      </gpu:layerFunction>
      <gpu:layerFunction>
        <name>receive_free_specialist</name>
      </gpu:layerFunction>
    </layer>
  </layers>
</gpu:xmodel>
